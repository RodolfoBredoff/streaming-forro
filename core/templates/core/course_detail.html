<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ course.title }} - Detalhes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body { background-color: #141414; color: white; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; }
        .navbar { background-color: rgba(0,0,0,0.9); }
        .course-header { 
            padding: 60px 0; 
            background: linear-gradient(to bottom, rgba(20,20,20,0) 0%, rgba(20,20,20,1) 100%), 
                        url('{{ course.thumbnail.url }}');
            background-size: cover; background-position: center;
        }
        .accordion-item { background-color: #2f2f2f; border: 1px solid #444; color: white; margin-bottom: 10px; }
        .accordion-button { background-color: #2f2f2f; color: white; font-weight: bold; }
        .accordion-button:not(.collapsed) { background-color: #444; color: #e50914; box-shadow: none; }
        .accordion-button::after { filter: invert(1); }
        .list-group-item { background-color: #181818; color: #b3b3b3; border: none; transition: 0.3s; }
        .list-group-item:hover { background-color: #333; color: white; cursor: pointer; }
        .play-icon { color: #e50914; margin-right: 15px; }
        .btn-netflix { background-color: #e50914; color: white; border: none; font-weight: bold; }
        .btn-netflix:hover { background-color: #b20710; color: white; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container">
        <a class="navbar-brand text-danger fw-bold fs-3" href="{% url 'course_list' %}">NETFLIX_CLONE</a>
    </div>
</nav>

<header class="course-header">
    <div class="container">
        <h1 class="display-3 fw-bold">{{ course.title }}</h1>
        <p class="lead col-md-8">{{ course.description }}</p>
    </div>
</header>

<main class="container py-5">
    <h3 class="mb-4">Módulos e Aulas</h3>
    
    <div class="accordion" id="accordionModules">
        {% for module in course.modules.all %}
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading{{ module.id }}">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ module.id }}">
                    <i class="bi bi-collection-play-fill me-2"></i> {{ module.title }}
                </button>
            </h2>
            <div id="collapse{{ module.id }}" class="accordion-collapse collapse" data-bs-parent="#accordionModules">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        {% for lesson in module.lessons.all %}
                        <a href="{% url 'video_detail' lesson.video.pk %}" class="list-group-item list-group-item-action d-flex align-items-center">
                            <i class="bi bi-play-circle-fill play-icon fs-4"></i>
                            <div>
                                <h6 class="mb-0">{{ lesson.title }}</h6>
                                <small class="text-muted">Aula {{ forloop.counter }}</small>
                            </div>
                        </a>
                        {% empty %}
                        <div class="p-3 text-muted">Nenhuma aula cadastrada neste módulo.</div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-muted">Em breve, novos conteúdos serão adicionados.</p>
        {% endfor %}
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>